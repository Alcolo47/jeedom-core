<div class="cmd cmd-widget widget-compass #history#" data-type="info" data-subtype="numeric" data-template="compass" data-cmd_id="#id#" data-cmd_uid="#uid#" data-version="#version#" data-eqLogic_id="#eqLogic_id#">
  <div class="title #hide_name#">
    <div  class="cmdName">#name_display#</div>
  </div>
  <div class="content-lg">
    <div class="widget-compass-container">
      <div class="widget-compass-outline"></div>
      <div class="widget-compass-needle-placer">
        <div class="widget-compass-needle"></div>
      </div>
      <div class="state"></div>
      <div class="winDir"></div>
    </div>
  </div>
  <div class="cmdStats #hide_history#">
    <div class="col-xs-12 center-block">
      <span title='{{Min}}' class='tooltips'>#minHistoryValue#</span>|<span title='{{Moyenne}}' class='tooltips'>#averageHistoryValue#</span>|<span title='{{Max}}' class='tooltips'>#maxHistoryValue#</span> <i class="#tendance#"></i>
    </div>
  </div>
  <script>
    var cmd#id# = $('.cmd[data-cmd_id=#id#]')
    jeedom.cmd.update['#id#'] = function(_options) {
      cmd#id#.attr('title', '{{Date de valeur}} : '+_options.valueDate+'<br/>{{Date de collecte}} : '+_options.collectDate)

      let directions#id# = ['{{Nord}}', '{{Nord-Est}}', '{{Est}}', '{{Sud-Est}}', '{{Sud}}', '{{Sud-Ouest}}', '{{Ouest}}', '{{Nord-Ouest}}']
      var windDir#id# = directions#id#[Math.round(((_options.display_value %= 360) < 0 ? _options.display_value + 360 : _options.display_value) / 45) % 8]
      cmd#id#.find('.widget-compass-needle-placer').css('transform', 'rotate(' + _options.display_value +'deg)')
      cmd#id#.find('.state').text(_options.display_value.toString()+'Â°')
      cmd#id#.find('.winDir').html(windDir#id#)
    }

    jeedom.cmd.update['#id#']({display_value:'#state#',valueDate:'#valueDate#',collectDate:'#collectDate#',alertLevel:'#alertLevel#'})

  </script>
</div>
